[簡體中文](README.md) | [繁體中文](README_CHT.md) | [English](README_ENG.md)

# Auto_Simulated_Universe
星穹鐵道-模擬宇宙全自動化

有一定的斷點回復功能，你可以切出去做其他事，切回來會繼續自動化。

目前只支持模擬宇宙4（數據不全）和6，地圖數據基本錄完了

----------------------------------------------------------------------------------------------

## 免責聲明
本軟件是一個外部工具旨在自動化崩壞星軌的遊戲玩法。它被設計成僅通過現有用戶界面與遊戲交互,並遵守相關法律法規。該軟件包旨在提供簡化和用戶通過功能與遊戲交互,並且它不打算以任何方式破壞遊戲平衡或提供任何不公平的優勢。該軟件包不會以任何方式修改任何遊戲文件或遊戲代碼。

This software is open source, free of charge and for learning and exchange purposes only. The developer team has the final right to interpret this project. All problems arising from the use of this software are not related to this project and the developer team. If you encounter a merchant using this software to practice on your behalf and charging for it, it may be the cost of equipment and time, etc. The problems and consequences arising from this software have nothing to do with it.

本軟件開源、免費，僅供學習交流使用。開發者團隊擁有本項目的最終解釋權。使用本軟件產生的所有問題與本項目與開發者團隊無關。若您遇到商家使用本軟件進行代練並收費，可能是設備與時間等費用，產生的問題及後果與本軟件無關。


請註意，根據MiHoYo的 [崩壞:星穹鐵道的公平遊戲宣言]([https://hsr.hoyoverse.com/en-us/news/111244](https://sr.mihoyo.com/news/111246?nav=news&type=notice)):

    "嚴禁使用外掛、加速器、腳本或其他破壞遊戲公平性的第三方工具。"
    "一經發現，米哈遊（下亦稱「我們」）將視違規嚴重程度及違規次數，采取扣除違規收益、凍結遊戲賬號、永久封禁遊戲賬號等措施。"

### 用法

如果你的電腦沒有安裝python+numpy，或者未正確將python添加進環境變量，那麽你將無法使用本項目。請理解本項目設置的這道門檻，如果你被門檻擋住了，請自行百度解決。

只支持1920\*1080(窗口化或全屏幕)，開啟祝福詳細描述，文本語言選擇簡體中文。（屏幕分辨率等於1920\*1080開全屏幕，大於的開窗口化）

默認世界：比如說如果你當前模擬宇宙默認世界4，但是想自動化世界6，那麽請先進入一次世界6來改變默認世界

如果沒怎麽接觸過python，建議直接在[release](https://github.com/CHNZYX/Auto_Simulated_Universe/releases/latest)中下載gui版本，並直接閱讀GUI使用方法

**第一次運行**

雙擊`install_requirements.bat`安裝依賴庫

進入遊戲，將人物傳送到黑塔的辦公室，然後雙擊 `align.bat` ，切回遊戲界面，等待視角轉換/原地轉圈結束

如果`align.bat`閃退，可以嘗試管理員運行
```plaintext
python align_angle.py
```

如果改變了鼠標dpi或遊戲分辨率/屏幕分辨率/窗口縮放倍率，需要重新校準！

**運行自動化**

人物靠近模擬宇宙（出現f鍵交互條）

雙擊run.bat 或者 管理員權限運行
```plaintext
python states.py --find=1
```
`info.yml`內容如下
```yaml
config:
  order_text: [1, 2, 3, 4] //模擬宇宙開局選的角色，建議改成自己的配隊，1表示第一個角色。最好在一號位選遠程角色（艾絲妲、三月七）方便開怪。
  angle: 1.0  //校準數據請勿更改
  difficulty: 4 //宇宙的難度，如果你要打難度1就改成1保存
  fate: 巡猎 //命途選擇，默認巡獵，可以直接修改為其它命途，對巡獵做了專門優化，因此除非萬不得已不要改命途。
  map_sha: '' //地图数据的版本，不建议更改
  show_map_mode: 0
  debug_mode: 0
  speed_mode: 0
  force_update: 0
  timezone: Default
```
默認是哪個宇宙就會進哪個！如果你默認不是第6世界，記得先手動切到第6世界！

註意！！！！！ 開始運行/開始校準之後就不要移動遊戲窗口了！要移動請先停止自動化！

**更新文件**

雙擊`update.bat`


### GUI使用方法

**第一次運行**

進入遊戲，將人物傳送到黑塔的辦公室，然後點擊校準，等待視角轉換/原地轉圈結束並彈出校準成功。

如果改變了鼠標dpi或遊戲分辨率/屏幕分辨率/窗口縮放倍率，需要重新校準！

在設置中選擇自己想要的難度和命途，配隊請用三個空格隔開四個數字，1表示第一個角色（編號規則示意見下圖）。最好在一號位選遠程角色（艾絲妲、三月七）方便開怪。

![配隊編號](https://github.com/CHNZYX/Auto_Simulated_Universe/blob/main/imgs/team.jpg)

比如說這張圖中，你想選擇娜塔莎，景元，希兒，彥卿，那麽請在配隊中輸入：`6 4 3 2`

**運行自動化**

人物靠近模擬宇宙（出現f鍵交互條）

點擊運行

註意！！！！！ 開始運行/開始校準之後就不要移動遊戲窗口了！要移動請先停止自動化！

**TIPS：**

F8/『停止』按鈕停止運行。

顯隱表示顯示/隱藏命令行窗口，默認隱藏

調試模式：√表示迷路後不再結算，—表示在√的基礎上遇到相似度低的地圖會暫停運行

如果不希望迷路後退出結算，請將調試模式變為√

速通模式：√表示只打每層最後一個怪，—表示在√的基礎上開啟奔跑

左下角為更新地圖按鈕（只會更新地圖，不會更新本體）

錄製地圖參見後文

推薦最低畫質配置：

![畫質](https://github.com/CHNZYX/Auto_Simulated_Universe/blob/main/imgs/image_quality.jpg)

### 通知插件使用方法（notif.exe）

如果你沒有用本地多用戶，那麽直接雙擊`notif.exe`即可開啟windows通知，每刷完一次都會通知哦

如果你用了本地多用戶，那麽請在子用戶運行gui，在主用戶運行notif，這樣就能在主用戶收到通知了

計數會在每周自動重置，如果想手動改變計數，請打開`logs/notif.txt`，修改第一行的信息

通知插件會在右下角顯示托盤圖標

----------------------------------------------------------------------------------------------

### 部分邏輯

選祝福的邏輯是硬選巡獵，事件基本都會跳過，最後一層不會強化祝福，奇物隨機選。

尋路模塊基於小地圖

小地圖中只會識別白色邊緣線和黃色交互點。

----------------------------------------------------------------------------------------------

支持錄製地圖，具體方法為

運行 `python states.py --debug=2 --find=1` （GUI版本：設置調試模式為-，然後點擊運行）

如果遇到新圖會角色停住，這時候結束自動化並且遊戲中暫離模擬宇宙

然後運行 `python states.py --debug=2 --find=0` （GUI版本：設置調試模式為-，然後點擊錄製）

運行後會自動進入地圖，期間請不要移動鼠標也不要動鍵盤

幾秒後角色會後退，然後前進。在角色前進時，你可以移動鼠標改變視角，也可以按鍵盤wasd。

在地圖中繞一圈，感覺差不多就`F8/ctrl+c`結束進程能得到地圖數據了。保存在`imgs/maps/my_xxxxx`目錄下（可以按修改時間排序）

有怪的圖最好用希兒戰技，被鎖定會影響小地圖識別。

`imgs/maps/my_xxxxx`目錄下會存在`target.jpg`，你可以用windows自帶的畫圖打開它，然後在上面標記點（可以參考其它地圖文件中的`target.jpg`）

靛藍色：路徑點 黃色：終點 綠色：交互點（問號點） 紅色：怪點

錄製結束後可以暫離並重新運行自動化測試地圖，如果通過測試，你就成功錄製到了新圖！

----------------------------------------------------------------------------------------------

歡迎加入，歡迎反饋bug，QQ群：831830526

----------------------------------------------------------------------------------------------

如果喜歡本項目，可以打賞送作者一杯咖啡喵！

![打賞](https://github.com/CHNZYX/Auto_Simulated_Universe/blob/main/imgs/money.jpg)
